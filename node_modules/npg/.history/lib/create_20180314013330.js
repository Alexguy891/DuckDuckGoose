const fse = require("fs-extra");
const chalk = require("chalk");
const path = require("path");

const paths = require("./paths");
const packageTemplate = require("../templates/package");
const indexTemplate = require("../templates/index");

module.exports = options => {
  const { pkgName, pkgPath, nodeVersion } = options;
  console.log(
    chalk.cyan(
      `Initializing the "${pkgName}" package for Node v${nodeVersion}...`
    )
  );
  // Ensure that package directory exists.
  fse.ensureDirSync(pkgPath);
  // Create package.json file.
  console.log(chalk.cyan('Creating "package.json" file...'));
  fse.outputFileSync(
    path.resolve(pkgPath, "package.json"),
    packageTemplate(options)
  );
  // Create index.js file.
  console.log(chalk.cyan('Creating "src/index.json" file...'));
  fse.outputFileSync(
    path.resolve(pkgPath, "src/index.js"),
    indexTemplate(options)
  );
};
